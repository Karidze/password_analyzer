<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Современный анализатор паролей</title>
    <style>

    body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        background: #f4f4f9;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
    }

    .container {
        background: #fff;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        max-width: 400px;
        width: 100%;
    }

    h1 {
        text-align: center;
        font-size: 24px;
    }

    input, .strength-bar {
        width: 100%;
        padding: 10px;
        margin-top: 10px;
        border-radius: 5px;
        border: 1px solid #ddd;
        box-sizing: border-box; /* Убедимся, что отступы и рамки входят в размер */
    }

    .strength-bar {
        height: 20px;
        position: relative;
        background: #ddd;
        overflow: hidden;
        border: none; /* Убираем лишние границы */
        padding: 0; /* Убираем внутренние отступы */
    }

    .strength-bar span {
        display: block;
        height: 100%;
        width: 0;
        background: red;
        transition: width 0.3s, background 0.3s;
    }

    .details {
        margin-top: 10px;
    }

    .details p {
        margin: 5px 0;
    }
</style>
</head>
<body>
    <div class="container">
        <h1>Password Strength Analyzer</h1>
        <input
            type="text"
            id="password"
            placeholder="Enter your password"
            oninput="analyzePassword()"
        />
        <div class="strength-bar">
            <span id="strength-bar-fill"></span>
        </div>
        <div class="details">
            <p>Length: <span id="length">0</span></p>
            <p>Uppercase letters: <span id="has-upper">No</span></p>
            <p>Lowercase letters: <span id="has-lower">No</span></p>
            <p>Digits: <span id="has-digit">No</span></p>
            <p>Special characters: <span id="has-special">No</span></p>
            <p>Strength: <strong id="strength">Very weak</strong></p>
        </div>
    </div>

    <script>
    function analyzePassword() {
        const password = document.getElementById("password").value;
        const length = password.length;
        const hasUpper = /[A-Z]/.test(password);
        const hasLower = /[a-z]/.test(password);
        const hasDigit = /\d/.test(password);
        const hasSpecial = /[!@#$%^&*(),.?":{}|<>]/.test(password);

        // Common passwords and patterns
        const commonPasswords = [
            "123456", "password", "123456789", "qwerty", "abc123",
            "password1", "123123", "admin", "welcome", "iloveyou",
            "1234567", "sunshine", "12345", "qwerty123", "letmein",
            "football", "monkey", "1234", "password123", "qwertyuiop"
        ];

        const commonPatterns = [
            /^\d{6,}$/, // Only digits, length 6 or more
            /^(.)\1+$/, // Repetition of a single character (e.g., "aaaaaa")
            /^(123|qwerty|asdf|zxcv|password)[a-zA-Z0-9]*$/i, // Common keyboard patterns
            /^[a-z]+123$/i, // Pattern like "name123"
        ];

        // Check for common passwords
        const isCommonPassword = commonPasswords.includes(password.toLowerCase());

        // Check for matching pattern
        const isCommonPattern = commonPatterns.some(pattern => pattern.test(password));

        // Calculate strength score
        let score = [hasUpper, hasLower, hasDigit, hasSpecial].filter(Boolean).length;

        // Increase score for length
        if (length >= 17) score += 0.5;
        if (length >= 18) score += 0.5;
        if (length >= 19) score += 0.5;
        if (length >= 20) score += 0.5;

        // Calculate strength level
        let strength = "Very weak";
        let strengthColor = "red";

        if (isCommonPassword) {
            strength = "Common password";
            strengthColor = "red";
        } else if (isCommonPattern && length <= 20) {
            strength = "Too predictable";
            strengthColor = "red";
        } else if (isCommonPattern && length > 20) {
            strength = "Strong"; // Exception: long password with common sequence
            strengthColor = "green";
        } else if (score >= 2 && length >= 8) {
            strength = "Weak";
            strengthColor = "orange";
        }
        if (score >= 3 && length >= 10) {
            strength = "Medium";
            strengthColor = "yellow";
        }
        if (score === 4 && length >= 12) {
            strength = "Strong";
            strengthColor = "green";
        }

        // Update progress bar
        const barFill = document.getElementById("strength-bar-fill");
        barFill.style.width = `${Math.min(score * 25 + (length / 16) * 10, 100)}%`;
        barFill.style.background = strengthColor;

        // Update information
        document.getElementById("length").textContent = length;
        document.getElementById("has-upper").textContent = hasUpper ? "Yes" : "No";
        document.getElementById("has-lower").textContent = hasLower ? "Yes" : "No";
        document.getElementById("has-digit").textContent = hasDigit ? "Yes" : "No";
        document.getElementById("has-special").textContent = hasSpecial ? "Yes" : "No";
        document.getElementById("strength").textContent = strength;
    }
    </script>
</body>

</html>
